const addSchedule=()=>{if(schedule_current>=schedule_max)swal({type:"warning",title:"Oops...",text:"No Se Pueden Agregar Más De 10 Horarios."});else{schedule_current++;let e=template(schedule_current);$("#create .schedules").append(e)}},template=(e,a="",t="")=>'<div class="col-md-8">\n       <div class="form-group">\n       <label for="schedule['+e+']" class="text-themecolor">Horario '+e+'</label>\n       <span class="bar"></span>\n       <input type="hidden" name="schedule['+e+'][id]" value="'+a+'">\n       <input type="text" name="schedule['+e+'][value]" class="form-control form-control-sm schedule" value="'+t+'">\n       <span class="text-muted">Ej: 04:30 pm - 06:00 pm</span>       </div>\n   </div><div class="col-md-4">\n     <div class="form-group">\n'+(1===e?'<button class="btn btn-outline-success" onclick="addSchedule()" type="button"><i class="fa fa-plus" aria-hidden="true"></i></button>':"")+"     </div></div>",resetModalForm=(e=!0,a)=>{let t=$("#form_create"),d=$("#modal_title");e?(d.html("Agregar Días de Entrenamiento"),t.prop("action",url_current),t.prop("method","POST")):(d.html("Actualizar Días de Entrenamiento."),t.prop("action",url_current+a),t.append("<input name='_method' value='PUT' type='hidden'>"))};jQuery.propHooks.disabled={set:(e,a)=>{e.disabled!==a&&(e.disabled=a,a&&$(e).trigger("disabledSet"),!a&&$(e).trigger("enabledSet"))}};let schedule_min=1,schedule_max=10,schedule_current=1;$(document).ready((()=>{let e=$("#class_one"),a=$("#class_two"),t=$("#class_three"),d=$("#class_four"),l=$("#class_five"),r=$("#day_one"),s=$("#day_two"),i=$("#day_three"),c=$("#day_four"),n=$("#day_five");$(".schedule").inputmask({mask:["hh:mm t","hh:mm t / hh:mm t"]}),s.attr("disabled",!0),i.attr("disabled",!0),c.attr("disabled",!0),n.attr("disabled",!0),$("input").on("change",(function(e){switch($(this).val()){case"1":r.val(""),s.attr("disabled",!0).val(""),i.attr("disabled",!0).val(""),c.attr("disabled",!0).val(""),n.attr("disabled",!0).val(""),$.each($("#day_one option[disabled]"),((e,a)=>{$(a).prop("disabled",!1)}));break;case"2":r.val(""),s.attr("disabled",!1).val(""),i.attr("disabled",!0).val(""),c.attr("disabled",!0).val(""),n.attr("disabled",!0).val(""),$.each($("#day_one option[disabled]"),((e,a)=>{$(a).prop("disabled",!1)})),$.each($("#day_two option[disabled]"),((e,a)=>{$(a).prop("disabled",!1)}));break;case"3":r.val(""),s.attr("disabled",!1).val(""),i.attr("disabled",!1).val(""),c.attr("disabled",!0).val(""),n.attr("disabled",!0).val(""),$.each($("#day_one option[disabled]"),((e,a)=>{$(a).prop("disabled",!1)})),$.each($("#day_two option[disabled]"),((e,a)=>{$(a).prop("disabled",!1)})),$.each($("#day_three option[disabled]"),((e,a)=>{$(a).prop("disabled",!1)}));break;case"4":r.val(""),s.attr("disabled",!1).val(""),i.attr("disabled",!1).val(""),c.attr("disabled",!1).val(""),n.attr("disabled",!0).val(""),$.each($("#day_one option[disabled]"),((e,a)=>{$(a).prop("disabled",!1)})),$.each($("#day_two option[disabled]"),((e,a)=>{$(a).prop("disabled",!1)})),$.each($("#day_three option[disabled]"),((e,a)=>{$(a).prop("disabled",!1)})),$.each($("#day_four option[disabled]"),((e,a)=>{$(a).prop("disabled",!1)}));break;case"5":r.val(""),s.attr("disabled",!1).val(""),i.attr("disabled",!1).val(""),c.attr("disabled",!1).val(""),n.attr("disabled",!1).val(""),$.each($("#day_one option[disabled]"),((e,a)=>{$(a).prop("disabled",!1)})),$.each($("#day_two option[disabled]"),((e,a)=>{$(a).prop("disabled",!1)})),$.each($("#day_three option[disabled]"),((e,a)=>{$(a).prop("disabled",!1)})),$.each($("#day_four option[disabled]"),((e,a)=>{$(a).prop("disabled",!1)})),$.each($("#day_five option[disabled]"),((e,a)=>{$(a).prop("disabled",!1)}))}})),$(".classes").on("change",(function(e){let a=$(this),t=a.val();$("select.classes").each((function(e,d){let l=$(d);a.attr("id")!==l.attr("id")&&""!==t&&l.find('option[value="'+t+'"]:not(:selected)').prop("disabled",!0)}))})),$("#active_table").DataTable({lengthMenu:[[15,30,50,70,100],[15,30,50,70,100]],scrollX:!0,processing:!0,serverSide:!0,ajax:$.fn.dataTable.pipeline({url:url_enabled,pages:5}),columns:[{data:"days"},{data:"schedul"},{data:"id",render:(e,a,t,d)=>'<form method="POST" action="'+t.url_destroy+'" accept-charset="UTF-8"><input name="_method" type="hidden" value="DELETE"><input name="_token" type="hidden" value="'+t.token+'"><div class="btn-group"><a href="javascript:void(0)" class="edit btn btn-default btn-xs" data-id="'+e+'"><i class="fas fa-pencil-alt"></i></a></div></form>'}],order:[[0,"desc"]]}),$("#form_create").validate({rules:{day_one:{required:!0},day_two:{required:!0},day_three:{required:!0},"schedule[1][value]":{required:!0}}}),$("#btn-add").on("click",(function(){schedule_current=1,$("#method").val(""),e.prop("checked",!0).trigger("change"),$("#create .schedules").empty().append(template(1)),$("#create #num_class").empty().html("")})),$("#active_table tbody").on("click","a.edit",(function(){let o=$(this).data("id");$.get(`${url_current}${o}/edit`,(function(p){if(null!=p.data){schedule_current=1,resetModalForm(!1,o);let h=p.data.days.split(",");switch(h.length){case 1:e.prop("checked",!0).trigger("change"),r.val(h[0]).trigger("change");break;case 2:a.prop("checked",!0).trigger("change"),r.val(h[0]).trigger("change"),s.val(h[1]).trigger("change");break;case 3:t.prop("checked",!0).trigger("change"),r.val(h[0]).trigger("change"),s.val(h[1]).trigger("change"),i.val(h[2]).trigger("change");break;case 4:d.prop("checked",!0).trigger("change"),r.val(h[0]).trigger("change"),s.val(h[1]).trigger("change"),i.val(h[2]).trigger("change"),c.val(h[3]).trigger("change");break;case 5:l.prop("checked",!0).trigger("change"),r.val(h[0]).trigger("change"),s.val(h[1]).trigger("change"),i.val(h[2]).trigger("change"),c.val(h[3]).trigger("change"),n.val(h[4]).trigger("change")}if($("#create #num_class").empty().html(p.data.schedules_count),$("#create .schedules").empty(),$.each(p.data.schedules,((e,a)=>{let t=template(e+1,a.id,a.schedule);$("#create .schedules").append(t),schedule_current++})),0===p.data.schedules.length){let e=template(1);$("#create .schedules").append(e)}$("#create").modal("show")}}))}))}));
