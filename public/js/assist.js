$("#training_group_id").select2({allowClear:!0}),$("#year").select2(),$("#month").select2();let btnPrint=$("#print"),btnPrintExcel=$("#print_excel"),tableActive=$("#active_table"),form_assist=$("#form_assist");jQuery((function(){tableActive=$("#active_table").DataTable(),form_assist.validate({submitHandler:e=>{let t=$(e).serializeArray();$.get(url_current,t,(e=>{validateData(e,!0)}))}}),$("#createAssist").on("click",(function(){if(form_assist.valid()){let e=$("#form_assist").serializeArray();$.post(url_current,e,(e=>{validateData(e,!1)}))}}))})),$("body").on("change","select.assist",(function(){let e=$(this).parent().parent().find("input, select").serializeArray(),t=$(this).parent().parent().find("input").val();""!==this.value&&(e.push({name:"_method",value:"PUT"}),$.post(url_current+`/${t}`,e))})),$("body").on("click","button.observation",(function(){let e=$(this).data("id"),t=$("#modal_title");t.empty(),$("#id_row").val(e),$("#observations").val(""),$.get(url_current+`/${e}`,(({id:e,observations:a,player:i})=>{t.html("Observación para: "+i.full_names),$("#id_row").val(e),$("#observations").val(a)}))})),$("#form_observation").validate({submitHandler:e=>{let t=$("#id_row").val(),a=$(e).serializeArray();a.push({name:"_method",value:"PUT"}),$.post(url_current+`/${t}`,a),$("#modal_observation").modal("hide")}});const validateData=({table:e,group_name:t,count:a,url_print:i,url_print_excel:n},r)=>{if(a>0){let l=r?`Se Han Encontrado ${a} Asistencia(s).`:`Se Han Creado ${a} Asistencia(s).`;tableActive.destroy(),$("#enabled").empty().append(e),$("#group_name").empty().append(t),initTable(),btnPrint.prop("href",i),btnPrint.removeClass("hide"),btnPrintExcel.prop("href",n),btnPrintExcel.removeClass("hide"),swal.fire({title:"Atención!!",text:l,type:"info",showCancelButton:!1,timer:1500})}else{let a=r?"Se Deben Crear Las Asistencias.":"El Grupo No Cuenta Con Integrantes.";tableActive.destroy(),$("#enabled").empty().append(e),$("#group_name").empty().append(t),initTable(),btnPrint.prop("href",""),btnPrint.addClass("hide"),btnPrintExcel.prop("href",""),btnPrintExcel.addClass("hide"),swal.fire({title:"Atención!!",text:a,type:"warning",showCancelButton:!1,timer:1500})}},initTable=()=>{tableActive=$("#active_table").DataTable({paging:!1,ordering:!1,info:!1,scrollX:!0,scrollY:!0})};
